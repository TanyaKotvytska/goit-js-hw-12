{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '44714741-6fe0dcbbee03096a14c34d671';\nconst baseUrl = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n    const url = `${baseUrl}?key=${apiKey}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    try {\n        const response = await axios.get(url);\n        if (response.status !== 200) {\n            throw new Error('Network response was not ok');\n        }\n        return response.data.hits;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n    lightbox.refresh();\n}\n\nexport function renderImages(images) {\n    const html = images.map(image => `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <div class=\"large-img\">\n                    <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n                    <ul class=\"img-details\">\n                        <li><p>Likes</p><p>${image.likes}</p></li>\n                        <li><p>Views</p><p>${image.views}</p></li>\n                        <li><p>Comments</p><p>${image.comments}</p></li>\n                        <li><p>Downloads</p><p>${image.downloads}</p></li>\n                    </ul>\n                </div>\n            </a>\n        </li>\n    `).join('');\n    \n    gallery.insertAdjacentHTML('beforeend', html);\n    lightbox.refresh();\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './js/pixabay-api.js';\nimport { clearGallery, renderImages } from './js/render-functions.js';\n\nlet searchTerm = '';\nlet currentPage = 1;\n\nconst form = document.querySelector('.search-form');\nconst searchInput = document.querySelector('.search-input');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst gallery = document.querySelector('.gallery');\n\nform.addEventListener('submit', async function (event) {\n    event.preventDefault();\n    searchTerm = searchInput.value.trim();\n\n    if (searchTerm === '') {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search term.',\n            position: 'topRight',\n            backgroundColor: '#EF4040',\n            messageColor: '#FFF',\n            titleColor: '#FFF',\n            iconColor: '#FFF',\n            timeout: 5000\n        });\n        return;\n    }\n\n    searchInput.value = '';\n    currentPage = 1;\n    clearGallery();\n    await performSearch(searchTerm, currentPage);\n});\n\nloadMoreBtn.addEventListener('click', async function () {\n    currentPage++;\n    loadMoreBtn.textContent = 'Loading images, please wait...';\n    loadMoreBtn.disabled = true;\n    await performSearch(searchTerm, currentPage);\n    loadMoreBtn.textContent = 'Load more';\n    loadMoreBtn.disabled = false;\n});\n\nasync function performSearch(term, page) {\n    loader.textContent = 'Loading images, please wait...';\n    loader.style.display = 'block';\n\n    try {\n        const images = await fetchImages(term, page);\n        loader.style.display = 'none';\n\n        if (images.length === 0) {\n            iziToast.info({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                backgroundColor: '#EF4040',\n                messageColor: '#FFF',\n                titleColor: '#FFF',\n                iconColor: '#FFF',\n                timeout: 5000\n            });\n        } else {\n            renderImages(images);\n            if (currentPage === 1) {\n                loadMoreBtn.style.display = 'inline-block';\n            }\n            smoothScrollToGallery();\n            checkEndOfResults(images.length);\n        }\n    } catch (error) {\n        loader.style.display = 'none';\n        iziToast.error({\n            title: 'Error',\n            message: 'Failed to fetch images. Please try again later.',\n            position: 'topRight',\n            backgroundColor: '#EF4040',\n            messageColor: '#FFF',\n            titleColor: '#FFF',\n            iconColor: '#FFF',\n            timeout: 5000\n        });\n        console.error('Error fetching images:', error);\n    }\n}\n\nfunction smoothScrollToGallery() {\n    const galleryHeight = gallery.getBoundingClientRect().height;\n    window.scrollBy({\n        top: galleryHeight,\n        behavior: 'smooth'\n    });\n}\n\nfunction checkEndOfResults(imagesCount) {\n    const perPage = 15;\n    if (imagesCount < perPage) {\n        loadMoreBtn.style.display = 'none';\n        iziToast.info({\n            title: 'Error',\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n            backgroundColor: '#EF4040',\n            messageColor: '#FFF',\n            titleColor: '#FFF',\n            iconColor: '#FFF',\n            timeout: 5000\n        });\n    } else {\n        loadMoreBtn.style.display = 'inline-block';\n    }\n}\n"],"names":["apiKey","baseUrl","fetchImages","query","page","perPage","url","response","axios","error","gallery","lightbox","SimpleLightbox","clearGallery","renderImages","images","html","image","searchTerm","currentPage","form","searchInput","loader","loadMoreBtn","event","iziToast","performSearch","term","smoothScrollToGallery","checkEndOfResults","galleryHeight","imagesCount"],"mappings":"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"}